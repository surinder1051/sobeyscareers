var map_content_preview=function(t){var e=decodeURIComponent(jQuery(t).attr("data-content"));jQuery(".map-preview-large").html(e),jQuery(".interactive-map-lightbox-wrap").fadeIn()};!function(t){var e=t("[data-js-custom_map]");function n(){t(".interactive-map-lightbox-wrap").fadeOut("slow",function(){t(".map-preview-large",this).attr("html","")}),t(".interactive-map-lightbox-wrap .modal-action").each(function(){t(this).removeClass("is-tabbing").attr("tabindex","")})}e.length&&(t(".map-area").on("click","h4",function(){t(this).text(),t(this).parent().find(".type").data("type"),t(this).parents(".component_custom_map")}),t(".lightbox-close").on("click",function(t){t.preventDefault(),n()}),t(document).keydown(function(t){27==(t.which?t.which:t.keyCode)&&n()}),t(document).ready(function(n){e.each(function(){var e=t(this).parents(".fl-module").data("node"),n=t(this).find(".map-area").innerHeight();t(this).find(".map-content-area").css("height",n),t(this).find("#map").attr("id","map_"+e),t(".cta-list li",this).length&&"object"==typeof google&&function(e){var n="44.79203208187161",i="-80.29557396136576",o={center:new google.maps.LatLng(n,i),zoom:8,maxZoom:12,mapTypeId:google.maps.MapTypeId.roadmap},a=new google.maps.Map(document.getElementById("map_"+e),o);a.set("styles",[{featureType:"landscape",stylers:[{color:"#f4f4f4"},{visibility:"on"}]},{featureType:"poi.park",stylers:[{color:"#f0f0f0"},{visibility:"on"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#e8e8e8"}]}]);var s,c=new google.maps.InfoWindow,r=[],l=new google.maps.LatLngBounds;for(t(".fl-node-"+e+" .cta-list li").each(function(){if(n=t(this).data("latitude"),i=t(this).data("longitude"),description=encodeURIComponent(t(this).data("content")),buttonText=t(this).data("button"),buttonTheme=t(this).data("theme"),p=t(this).data("icon"),heading=t(this).data("title"),n&&i){var e={lat:n,long:i,heading:heading,description:description,icon:p,button:buttonText,theme:buttonTheme};r.push(e)}}),s=0;s<r.length;s++){var p={url:r[s].icon,scaledSize:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,32)},d=new google.maps.Marker({position:new google.maps.LatLng(r[s].lat,r[s].long),map:a,icon:p,title:""});l.extend(d.position),google.maps.event.addListener(d,"click",function(t,e){return function(){var n='<div class="location-info" data-content="'+r[e].description+'" onclick="javascript:map_content_preview(this)">';n+="<h4>"+r[e].heading+"</h4>",n+='<button class="location-description">'+r[e].button+"</button>",n+="</div>",c.setContent(n),c.open(a,t)}}(d,s))}a.fitBounds(l)}(e)})}),t(document).keydown(function(e){var i=e.which?e.which:e.KeyCode;if(t(".interactive-map-lightbox-wrap").is(":visible"))switch(i){case 27:n()}}))}(jQuery);
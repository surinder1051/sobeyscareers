var stationModalControls,selected=!1,stationModalNext=1,stationModalPrev=0;function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}!function(t){var e=t("[data-js-stations]");function a(e){var a=stationModalPrev-1;t(".modal-action",e).removeClass("is-tabbing"),t(stationModalControls[stationModalPrev],e).focus().addClass("is-tabbing").attr("tabindex","0"),0==stationModalPrev&&(next=stationModalControls.length-1),stationModalPrev=a}function i(e){var a=1+stationModalNext;t(".modal-action",e).removeClass("is-tabbing"),t(stationModalControls[stationModalNext],e).focus().addClass("is-tabbing").attr("tabindex","0"),a==stationModalControls.length&&(a=0),stationModalNext=a}function l(){t(".interactive-map-lightbox-wrap").fadeOut(),t(".interactive-map-lightbox-wrap .modal-action").each(function(){t(this).removeClass("is-tabbing").attr("tabindex","")})}function n(e){var a="44.79203208187161",i="-80.29557396136576",l={center:new google.maps.LatLng(a,i),zoom:8,maxZoom:12,mapTypeId:google.maps.MapTypeId.roadmap},n=new google.maps.Map(document.getElementById("map_"+e),l);n.set("styles",[{featureType:"landscape",stylers:[{color:"#c2e6b0"},{visibility:"on"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#74d6ff"}]}]);var o,s=new google.maps.InfoWindow,d=[],r=new google.maps.LatLngBounds;if(0<t(".fl-node-"+e+" .map-module-level-2 .single_active").length){a=t(".fl-node-"+e+" .map-module-level-2 li a.single_active").data("facility_latitude"),i=t(".fl-node-"+e+" .map-module-level-2 li a.single_active").data("facility_longitude"),description=t(".fl-node-"+e+" .map-module-level-2 li a.single_active").data("facility_description"),p=t(".fl-node-"+e+" .map-module-level-2 li a.single_active").data("facility_icon"),heading=t.trim(t(".fl-node-"+e+" .map-module-level-2 li a.single_active").text()),""==description&&(type='<div class="hide_phone"><strong>Generation type:</strong> '+t(".fl-node-"+e+" .map-module-level-2 li a.single_active").data("facility_type"),city="<strong>Nearest city/town:</strong> "+t(".fl-node-"+e+" .map-module-level-2 li a.single_active").data("facility_city")+"</div>",description=type+"<br/>"+city);var c={lat:a,long:i,heading:heading,description:description,icon:p};d.push(c)}else t(".fl-node-"+e+" .map-module-level-2 li a.active").each(function(){if(a=t(this).data("facility_latitude"),i=t(this).data("facility_longitude"),description=t(this).data("facility_description"),""==description&&(type='<div class="hide_phone"><strong class="type" data-type="'+t(this).data("facility_type")+'">Generation type:</strong> '+t(this).data("facility_type"),city="<strong>Nearest city/town:</strong> "+t(this).data("facility_city")+"</div>",description=type+"<br/>"+city),p=t(this).data("facility_icon"),heading=t.trim(t(this).text()),a&&i){var e={lat:a,long:i,heading:heading,description:description,icon:p};d.push(e)}});for(o=0;o<d.length;o++){var p={url:d[o].icon,scaledSize:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,32)},m=new google.maps.Marker({position:new google.maps.LatLng(d[o].lat,d[o].long),map:n,icon:p,title:""});r.extend(m.position),google.maps.event.addListener(m,"click",function(t,e){return function(){var a="<div class='location-info'>";a+="<h4 style='color: #06c;text-decoration: underline;font-weight: 700;' role='button'>"+d[e].heading+"</h4>",a+="<p class='location-description'>"+d[e].description+"</p>",a+="</div>",s.setContent(a),s.open(n,t)}}(m,o))}n.fitBounds(r)}e.length&&(t(".map-module-level-2 .top-text button").click(function(e){e.preventDefault(),id=t(this).parents(".fl-module").data("node"),t(".fl-node-"+id+" .map-module-level-2").hide(),t(".fl-node-"+id+" .map-module-level-1").show(),t(".fl-node-"+id+" .map-module-level-2 li a").addClass("active"),n(id)}),t(".map-module-level-3 .top-nav a.type").click(function(e){e.preventDefault(),id=t(this).parents(".fl-module").data("node"),t(".fl-node-"+id+" .map-module-level-2 li a.single_active").removeClass("single_active"),t(".fl-node-"+id+" .map-module-level-2 li a.active").removeClass("single_view"),t(".fl-node-"+id+" .map-module-level-3").hide(),t(".fl-node-"+id+" .map-module-level-2").show(),n(id)}),t(".info-image").click(function(e){var a=t(this).attr("data-large-image");t(".map-preview-large").attr("src",a),t(".interactive-map-lightbox-wrap").fadeIn()}),t(".map-area").on("click","h4",function(){var e=t(this).text(),a=t(this).parent().find(".type").data("type"),i=t(this).parents(".component_stations");i.find('.map-module-level-1 button:contains("'+a+'")').click(),i.find('.map-module-level-2 a:contains("'+e+'")').click()}),t(".lightbox-close").stop().click(function(t){t.preventDefault(),l()}),t("[data-js-stations] .cta-text button").click(function(e){!function(e,a){id=t(e).parents(".fl-module").data("node"),t(".fl-node-"+id+" [data-js-stations]").hasClass("station_type")&&(t(".fl-node-"+id+" .map-module-level-2 .top-text button").text("All "+a),t(".fl-node-"+id+" .map-module-level-3 .top-nav a").text("All "+a));t(".fl-node-"+id+" .map-module-level-2 h3").text(a),t(".fl-node-"+id+" .map-module-level-3 a.type").text("All "+a).attr("disabled",!1).attr("aria-disabled",!1).attr("aria-label","Back to "+a),t(".fl-node-"+id+" .map-module-level-2 ul").each(function(){t("li",this).each(function(){t(this).find("a").removeClass("active"),station_type=t(this).data("type"),-1<station_type.indexOf(a)?t(this).show().find("a").addClass("active"):t(this).hide()}),1>t(".active",this).length?t(this).hide().prev(".heading-6").hide():t(this).show().prev(".heading-6").show()}),t(".fl-node-"+id+" .map-module-level-3 .heading-6").html('<span class="icon">'+t(e).parents("li").find(".icon").html()+"</span>"),t(".fl-node-"+id+" .map-module-level-1").hide(),t(".fl-node-"+id+" .map-module-level-2").show(),t(".fl-node-"+id+" .component_stations").hasClass("single_station")&&!window.selected&&(t(".fl-node-"+id).find("a.active").click(),t(".fl-node-"+id).find(".map-module-level-3").show(),window.selected=!0);n(id)}(this,t(this).text())}),t("[data-js-stations] .scroll-list ul li a").click(function(e){e.preventDefault();var a=t(this).parents(".fl-module").data("node");t(".fl-node-"+a+" .map-module-level-3 tr").hide(),type=t(this).data("facility_type"),""!=type&&t(".fl-node-"+a+" .map-module-level-3 td.type").text(type).parents("tr").show(),region=t(this).data("facility_region"),""!=region&&t(".fl-node-"+a+" .map-module-level-3 td.region").text(region).parents("tr").show(),city=t(this).data("facility_city"),""!=city&&t(".fl-node-"+a+" .map-module-level-3 td.city").text(city).parents("tr").show(),located_on=t(this).data("facility_located_on"),""!=located_on&&t(".fl-node-"+a+" .map-module-level-3 td.located_on").text(located_on).parents("tr").show(),units=t(this).data("facility_units"),""!=units&&t(".fl-node-"+a+" .map-module-level-3 td.units").text(units).parents("tr").show(),date=t(this).data("facility_date"),""!=date&&t(".fl-node-"+a+" .map-module-level-3 td.date").text(date).parents("tr").show(),capacity=t(this).data("facility_capacity"),""!=capacity&&t(".fl-node-"+a+" .map-module-level-3 td.capacity").text(capacity).parents("tr").show(),link_url=t(this).data("facility_link_url"),link_title=t(this).data("facility_link_title"),""==link_title&&(link_title=link_url),""!=link_url&&(-1<link_url.indexOf("http")?link='<a target="_blank" href="'+link_url+'">'+link_title+"</a>":link='<a href="'+link_url+'">'+link_title+"</a>",t(".fl-node-"+a+" .map-module-level-3 td.link").html(link).parents("tr").show()),large_image=t(this).data("facility_img_full"),small_image=t(this).data("facility_img_thumb"),""!=small_image?(t(".fl-node-"+a+" .map-module-level-3 .info-image").attr("data-large-image",large_image).show(),t(".fl-node-"+a+" .map-module-level-3 .info-image > img").attr("src",small_image)):t(".fl-node-"+a+" .map-module-level-3 .info-image").hide(),temp_span=t(".fl-node-"+a+" .map-module-level-3 .heading-6 span").html(),t(".fl-node-"+a+" .map-module-level-3 .heading-6").html('<span class="icon">'+temp_span+"</span>"+t(this).text()),t(".fl-node-"+a+" .map-module-level-2 li a.active").addClass("single_view"),t(this).addClass("single_active"),t(".fl-node-"+a+" .map-module-level-2").hide(),t(".fl-node-"+a+" .map-module-level-3").show(),n(a)}),t(document).keydown(function(t){27==t.keyCode&&l()}),t(document).ready(function(a){e.each(function(){var e=t(this).parents(".fl-module").data("node"),a=t(this).find(".map-area").innerHeight();if(t(this).find(".map-content-area").css("height",a),t(this).find("#map").attr("id","map_"+e),n(e),jQuery(this).find(".filter_by_post").length){var i=[];jQuery(this).find(".filter_by_post a").each(function(){i.push(jQuery(this).data("facility_type"))}),jQuery(this).find(".map-module-level-1 .cta-text button").each(function(){0>jQuery.inArray(jQuery(this).text(),i)&&jQuery(this).parents("li").remove()})}(jQuery(this).hasClass("station_type")||jQuery(this).hasClass("single_station"))&&1==jQuery(this).find(".map-module-level-1 .cta-text button").length&&(jQuery(this).find(".map-module-level-1 .cta-text button").click(),jQuery(this).find(".map-module-level-2 .top-text span").remove())})}),t(document).keydown(function(e){var n=e.which?e.which:e.KeyCode;if(t(".interactive-map-lightbox-wrap").is(":visible"))switch(n){case 9:e.preventDefault(),function(){stationModalControls=new Array,t(".interactive-map-lightbox-wrap .modal-action").each(function(){t(this).is(":visible")&&stationModalControls.push(t(this))});for(var e=0;e<stationModalControls.length;e++)1==stationModalControls.length?(stationModalNext=0,stationModalPrev=0):t(stationModalControls[e]).hasClass("is-tabbing")&&(stationModalNext=1+e==stationModalControls.length?0:1+e,stationModalPrev=0>-1+e?stationModalControls.length-1:-1+e)}(),e.shiftKey?a(t(".interactive-map-lightbox-wrap")):i(t(".interactive-map-lightbox-wrap"));break;case 39:a(t(".interactive-map-lightbox-wrap"));break;case 37:i(t(".interactive-map-lightbox-wrap"));break;case 27:l();break;case 13:"nav-control"!=e.target.className.match(/nav\-control/)?t(".interactive-map-lightbox-wrap .lightbox-close").focus():t(e).focus()}}))}(jQuery),document.addEventListener("DOMContentLoaded",function(t){var e,a;e="CSS"in window&&"function"==typeof CSS.supports&&!CSS.supports("-webkit-appearance","none"),a=function(t,e){var a=document.createElement(t);return a.className="scrollscreen-"+e,a},[].concat(_toConsumableArray(document.querySelectorAll("[data-js-stations] .scrollscreen"))).forEach(function(t){var i=document.createDocumentFragment();[].concat(_toConsumableArray(t.childNodes)).forEach(function(t){i.appendChild(t)});var l=a("div","content");l.appendChild(i),t.appendChild(l);var n=a("div","track");t.appendChild(n);var o=a("div","slider");n.appendChild(o);var s=null,d=function(){cancelAnimationFrame(s),s=requestAnimationFrame(function(){var e=l.scrollHeight,a=t.offsetHeight,i=a/e,s=i*a,d=l.scrollTop/(e-a)*(a-s);n.style.opacity=1===i?0:1,o.style.cssText="\n                    height: "+s+"px;\n                    transform: translateY("+d+"px);\n                "})};if(l.addEventListener("scroll",d),window.addEventListener("resize",d),d(),e){var r=function(){requestAnimationFrame(function(){var t=l.scrollTop;l.scrollTop=t+1,l.scrollTop=t})};t.addEventListener("mouseenter",r),r()}})});
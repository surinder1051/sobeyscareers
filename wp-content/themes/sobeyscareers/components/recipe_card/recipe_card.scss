@import 'component';

$magenta-opacity: rgba(142, 18, 56, 0.7) !default;
$brand-dark-transparent: rgba($brand-dark, 0.7);

$heading-fonts: 'Raleway',
sans-serif !default;

// number of cards per line for each breakpoint 
$cards-per-line: (xs: 1,
	sm: 2,
	md: 3,
	lg: 4,
	xl: 4);

.card-deck {
	margin: 0;

	.fl-module-recipe_card {
		flex: 1;
		min-width: 25%;
		max-width: 25%;

		@include media-breakpoint-only(md) {
			min-width: 33.3333%;
			max-width: 33.3333%;
		}

		@include media-breakpoint-down(sm) {
			max-width: 100%;
			min-width: 100%;
		}

		&:nth-of-type(4n+0) {
			.card-body {
				border-right: none;

				@include media-breakpoint-only(md) {
					border-right: rem(1) solid $gray-soft;
				}
			}
		}

		&:nth-of-type(3n+0) {
			.card-body {
				@include media-breakpoint-only(md) {
					border-right: none;
				}
			}
		}
	}

	.recipe-card {
		border: none;
		flex: 1;
		margin: 0;
		min-width: 25%;

		@include media-breakpoint-only(md) {
			min-width: 33.3333%;
		}

		@include media-breakpoint-down(sm) {
			max-width: 100%;
			min-width: 100%;
		}

		&.easy-meal-card {
			.card-body {
				padding: rem(0) rem(20);

				@media (max-width: $ultra_screen) {
					padding: rem(0) rem(15);
				}

				.card-title {
					padding: rem(30) 0;

					@media (max-width: $ultra_screen) {
						padding: rem(25) 0;
					}
				}

				.bottom-col-wrap {
					.col {
						span {
							display: inline-block;
							position: relative;
							width: 100%;
							height: rem(45);
							text-align: center;

							&:before {
								transform: translate(0%);
								top: 0;
								left: 50%;
								margin: 0;
							}
						}

						.description {
							padding: 0;
							width: 100%;
							display: inline-block;
							text-align: center;
							line-height: rem(20);

							.description-term {
								font-size: rem(16);
								line-height: rem(16);
								margin-bottom: rem(8);

								@media (max-width: $ultra_screen) {
									font-size: rem(14);
									line-height: rem(14);
								}

								@media (min-width:$extended_screen_sm) and (max-width: $extended_screen_lg) {
									font-size: rem(12);
									line-height: rem(12);
								}

								@include media-breakpoint-only(lg) {
									line-height: rem(18);
								}

								@include media-breakpoint-only(md) {
									line-height: rem(18);
								}

								@include media-breakpoint-down(sm) {
									font-size: rem(16);
									line-height: rem(16);
								}

								@media (max-width: $extra_small_screen) {
									font-size: rem(14);
									line-height: rem(14);
								}
							}

							.description-detail {
								font-size: rem(16);
								line-height: rem(16);

								@media (max-width: $ultra_screen) {
									font-size: rem(14);
									line-height: rem(14);
								}

								@media (min-width:$extended_screen_sm) and (max-width: $extended_screen_lg) {
									font-size: rem(12);
									line-height: rem(12);
								}

								@include media-breakpoint-only(lg) {
									line-height: rem(18);
								}

								@include media-breakpoint-only(md) {
									line-height: rem(18);
								}

								@include media-breakpoint-down(sm) {
									font-size: rem(16);
									line-height: rem(16);
								}

								@media (max-width: $extra_small_screen) {
									font-size: rem(14);
									line-height: rem(20);
								}
							}
						}
					}
				}
			}
		}

		&.product-card {
			.recipe_card_link {
				padding: 0;
			}
		}

		.card-body {
			.card-title {
				padding: rem(30) 0;

				@media (max-width: $ultra_screen) {
					padding: rem(25) 0;
				}
			}
		}

		&:not(.is-tabbing) {
			&:focus {
				outline: 0;
			}
		}

		.button-holder {
			position: absolute;
			top: rem(30);
			right: rem(30);

			@include media-breakpoint-down(lg) {
				top: rem(10);
				right: rem(10);
			}

		}

		.recipe_card_link {
			display: block;
			position: relative;
		}

		.card-body {
			border-right: rem(1) solid $gray-soft;
			border-bottom: rem(1) solid $gray-soft;
			padding: 0 rem(40);

			@media (max-width: $ultra-screen) {
				padding: 0 rem(25);
			}

			@media (min-width: $extended-screen-sm) and (max-width: $extended-screen-lg) {
				padding: 0 rem(15);
			}

			@include media-breakpoint-only(lg) {
				padding: 0 rem(10);
			}

			@include media-breakpoint-only(md) {
				padding: 0 rem(10);
			}


			a {
				text-decoration: none;
			}

			.card-title {
				font-family: $heading-fonts;
				color: $gray-25;
				font-size: rem(20);
				font-weight: 300;
				line-height: rem(26);
				margin: 0;
				padding: rem(16) 0;
				border-bottom: rem(1) solid $gray-soft;

				@include media-breakpoint-only(lg) {
					font-size: rem(20);
					line-height: rem(26);
				}

				@include media-breakpoint-only(md) {
					font-size: rem(18);
					line-height: rem(24);
				}

				@include media-breakpoint-down(sm) {
					font-size: rem(22);
				}
			}

			.row {
				border-bottom: solid rem(1) $gray-soft;

				&:first-of-type {
					border-top: solid rem(1) $gray-soft;
				}
			}


			.bottom-col-wrap {
				.col {
					border-right: rem(1) solid $gray-soft;
					padding: rem(16) rem(5);
					position: relative;
					text-align: center;

					@include media-breakpoint-up(lg) {
						text-align: left;
					}

					&:last-child {
						border-right: none;
						margin-left: rem(10);
					}

					span {
						position: absolute;
						top: rem(30);
						left: 0;
						transform: translateY(-50%);

						@include media-breakpoint-only(lg) {
							top: rem(34);
						}

						@include media-breakpoint-down(md) {
							position: relative;
							top: 0;
							height: rem(30);
							display: block;
							transform: translateY(0%);
						}

						@include media-breakpoint-down(sm) {
							position: relative;
							top: 0;
							height: rem(30);
							display: block;
							transform: translateY(0%);
						}

						&.icon-total-time {
							&:before {
								font-size: rem(24);

								@include media-breakpoint-only(lg) {
									font-size: rem(20);
								}
							}
						}

						&.icon-serve {
							&::before {
								font-size: rem(32);

								@include media-breakpoint-only(lg) {
									font-size: rem(26);
								}

								@include media-breakpoint-only(md) {
									font-size: rem(34);
									line-height: rem(24);
								}

								@include media-breakpoint-down(sm) {
									font-size: rem(34);
									line-height: rem(24);
								}
							}
						}

						&:before {
							top: 0;
							margin-left: 0;
						}
					}

					.description {
						margin-bottom: 0;

						@include media-breakpoint-only(lg) {
							padding-left: rem(25);
						}

						@include media-breakpoint-up(xl) {
							padding-left: rem(35);
						}
					}

					.description-term {
						color: $gray-25;
						margin-bottom: rem(5);
						margin-top: rem(5);
						font-size: rem(16);
						line-height: rem(16);

						@media (min-width: $extended_screen_sm) and (max-width: $extended_screen_lg) {
							font-size: rem(14);
							line-height: rem(14);
						}

						@media (max-width: $ultra-screen) {
							font-size: rem(13);
						}

						@include media-breakpoint-only(md) {
							font-size: rem(12);
						}

						@include media-breakpoint-only(lg) {
							font-size: rem(12);
							line-height: rem(12);
						}

						@include media-breakpoint-up(xl) {
							margin-top: 0;
							font-size: rem(14);
							line-height: rem(14);
						}
					}

					.description-detail {
						color: $gray-25;
						margin: 0;
						font-size: rem(16);
						line-height: rem(16);

						@media (min-width: $extended_screen_sm) and (max-width: $extended_screen_lg) {
							font-size: rem(14);
							line-height: rem(14);
						}

						@media (max-width: $ultra-screen) {
							font-size: rem(13);
						}

						@include media-breakpoint-only(lg) {
							font-size: rem(14);
							line-height: rem(14);
						}

						@include media-breakpoint-only(md) {
							font-size: rem(11);
						}
					}

					span {
						&::before {
							color: $text-links-default-colour;
							font-size: rem(22);

							@media (max-width: $ultra-screen) {
								font-size: rem(24);
							}

							@include media-breakpoint-only(lg) {
								font-size: rem(22);
							}

							&.fpicon-serving-tray {
								font-size: rem(16);

								@media (max-width: $ultra-screen) {
									font-size: rem(18);
								}

								@include media-breakpoint-only(lg) {
									font-size: rem(16);
								}
							}
						}
					}
				}
			}
		}

		.card-img-top {
			background-position: center;
			background-size: cover;
			border: none;
			border-radius: 0;
			height: calc(25vw / 1.2);
			max-height: rem(400);
			min-height: rem(160);

			@include media-breakpoint-only(md) {
				height: calc(33.3333vw / 1.2);
			}

			@include media-breakpoint-down(sm) {
				height: calc(100vw / 1.2);
			}
		}

		a {
			color: inherit;
		}

		@include media-breakpoint-down(sm) {
			margin-bottom: rem(20);
			max-width: 100vw;
			min-width: 100vw;
		}

		@include media-breakpoint-only(md) {
			min-width: 33.3333334%;
		}

	}

	@each $name,
	$breakpoint in $grid-breakpoints {
		@media (min-width: $breakpoint) {
			.card {
				flex: 0 0 calc(#{100 / map-get($cards-per-line, $name)});
			}
		}
	}

	&.columns_4 {
		.recipe-card {
			@include media-breakpoint-only(md) {
				min-width: 25%;
				max-width: 25%;
			}
		}
	}
}

.archive_page {
	&.border_top {
		.card-deck {
			.recipe-card {
				.card-body {
					.card-title {
						border-top: rem(1) solid $gray-soft;
					}
				}
			}
		}
	}

	.card-deck {
		.recipe-card {
			.card-body {
				.card-title {
					border-bottom: 0;
				}
			}
		}
	}
}

.fl-module-collection {
	.component_collection {
		.recipe-card {
			.card-body {
				padding-top: rem(25);
			}
		}
	}
}